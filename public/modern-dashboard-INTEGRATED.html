<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸš– ××¢×¨×›×ª × ×™×”×•×œ ××•× ×™×•×ª - Dashboard ××§×¦×•×¢×™</title>
  <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --secondary: #8b5cf6;
      --success: #10b981;
      --danger: #ef4444;
      --warning: #f59e0b;
      --info: #3b82f6;
      --light: #f8fafc;
      --dark: #1e293b;
      --gray: #64748b;
      --border: #e2e8f0;
      --sidebar-width: 280px;
      --header-height: 70px;
    }

    body {
      font-family: 'Heebo', sans-serif;
      background-color: var(--light);
      color: var(--dark);
      overflow-x: hidden;
    }

    /* ============================================
       SIDEBAR
    ============================================ */
    .sidebar {
      position: fixed;
      right: 0;
      top: 0;
      height: 100vh;
      width: var(--sidebar-width);
      background: linear-gradient(180deg, var(--primary) 0%, var(--primary-dark) 100%);
      color: white;
      padding: 25px 0;
      overflow-y: auto;
      box-shadow: -4px 0 20px rgba(0,0,0,0.1);
      z-index: 1000;
      transition: transform 0.3s;
    }

    .sidebar-header {
      padding: 0 25px 30px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }

    .sidebar-header h2 {
      font-size: 24px;
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .sidebar-header .user-info {
      margin-top: 15px;
      font-size: 14px;
      opacity: 0.9;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .sidebar-header .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: rgba(255,255,255,0.2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
    }

    .sidebar-menu {
      list-style: none;
    }

    .menu-section {
      margin-bottom: 30px;
    }

    .menu-section-title {
      padding: 0 25px;
      font-size: 12px;
      text-transform: uppercase;
      opacity: 0.7;
      margin-bottom: 10px;
      font-weight: 600;
      letter-spacing: 1px;
    }

    .menu-item {
      padding: 14px 25px;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 15px;
      font-weight: 500;
      position: relative;
    }

    .menu-item:hover {
      background: rgba(255,255,255,0.1);
      padding-right: 30px;
    }

    .menu-item.active {
      background: rgba(255,255,255,0.15);
      border-right: 4px solid white;
    }

    .menu-item i {
      width: 20px;
      text-align: center;
      font-size: 18px;
    }

    .menu-item .badge {
      margin-right: auto;
      background: var(--danger);
      color: white;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 700;
    }

    /* ============================================
       MAIN CONTENT
    ============================================ */
    .main-content {
      margin-right: var(--sidebar-width);
      min-height: 100vh;
    }

    /* Header */
    .header {
      background: white;
      height: var(--header-height);
      padding: 0 30px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-search {
      display: flex;
      align-items: center;
      background: var(--light);
      padding: 10px 20px;
      border-radius: 25px;
      width: 400px;
      gap: 10px;
    }

    .header-search input {
      border: none;
      background: none;
      flex: 1;
      font-size: 14px;
      outline: none;
      font-family: 'Heebo', sans-serif;
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .icon-btn {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--light);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      position: relative;
    }

    .icon-btn:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-2px);
    }

    .icon-btn .badge-dot {
      position: absolute;
      top: 8px;
      left: 8px;
      width: 10px;
      height: 10px;
      background: var(--danger);
      border-radius: 50%;
      border: 2px solid white;
    }

    /* Content Area */
    .content-area {
      padding: 30px;
    }

    .page-header {
      margin-bottom: 30px;
    }

    .page-header h1 {
      font-size: 32px;
      font-weight: 700;
      color: var(--dark);
      margin-bottom: 8px;
    }

    .page-header .breadcrumb {
      color: var(--gray);
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Stats Cards */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s;
      border: 1px solid var(--border);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }

    .stat-info h3 {
      font-size: 14px;
      color: var(--gray);
      margin-bottom: 8px;
      font-weight: 500;
    }

    .stat-info .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--dark);
    }

    .stat-info .stat-change {
      font-size: 12px;
      margin-top: 5px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .stat-change.positive {
      color: var(--success);
    }

    .stat-change.negative {
      color: var(--danger);
    }

    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .stat-icon.primary { background: rgba(99, 102, 241, 0.1); color: var(--primary); }
    .stat-icon.success { background: rgba(16, 185, 129, 0.1); color: var(--success); }
    .stat-icon.warning { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
    .stat-icon.danger { background: rgba(239, 68, 68, 0.1); color: var(--danger); }

    /* Card */
    .card {
      background: white;
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      border: 1px solid var(--border);
      margin-bottom: 20px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border);
    }

    .card-header h2 {
      font-size: 20px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-actions {
      display: flex;
      gap: 10px;
    }

    /* Buttons */
    .btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-family: 'Heebo', sans-serif;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    }

    .btn-success {
      background: var(--success);
      color: white;
    }

    .btn-success:hover {
      background: #059669;
      transform: translateY(-2px);
    }

    .btn-danger {
      background: var(--danger);
      color: white;
    }

    .btn-danger:hover {
      background: #dc2626;
      transform: translateY(-2px);
    }

    .btn-warning {
      background: var(--warning);
      color: white;
    }

    .btn-secondary {
      background: var(--gray);
      color: white;
    }

    .btn-outline {
      background: transparent;
      border: 2px solid var(--primary);
      color: var(--primary);
    }

    .btn-sm {
      padding: 8px 16px;
      font-size: 13px;
    }

    /* Table */
    .table-container {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    thead {
      background: var(--light);
    }

    th {
      padding: 15px;
      text-align: right;
      font-weight: 600;
      font-size: 13px;
      color: var(--gray);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    td {
      padding: 15px;
      border-bottom: 1px solid var(--border);
    }

    tr:hover {
      background: var(--light);
    }

    /* Status Badges */
    .status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
    }

    .status.success { background: rgba(16, 185, 129, 0.1); color: var(--success); }
    .status.danger { background: rgba(239, 68, 68, 0.1); color: var(--danger); }
    .status.warning { background: rgba(245, 158, 11, 0.1); color: var(--warning); }
    .status.info { background: rgba(59, 130, 246, 0.1); color: var(--info); }

    .status i {
      font-size: 10px;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      font-size: 14px;
      color: var(--dark);
    }

    .form-control {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid var(--border);
      border-radius: 8px;
      font-size: 14px;
      font-family: 'Heebo', sans-serif;
      transition: all 0.3s;
    }

    .form-control:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }

    select.form-control {
      cursor: pointer;
    }

    textarea.form-control {
      min-height: 100px;
      resize: vertical;
    }

    /* Grid */
    .grid-2 {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      align-items: center;
      justify-content: center;
    }

    .modal.active {
      display: flex;
    }

    .modal-content {
      background: white;
      border-radius: 12px;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      animation: modalSlideIn 0.3s;
    }

    @keyframes modalSlideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-header {
      padding: 25px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h3 {
      font-size: 20px;
      font-weight: 600;
    }

    .modal-close {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: none;
      background: var(--light);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .modal-close:hover {
      background: var(--danger);
      color: white;
    }

    .modal-body {
      padding: 25px;
    }

    .modal-footer {
      padding: 20px 25px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--gray);
    }

    .empty-state i {
      font-size: 64px;
      margin-bottom: 20px;
      opacity: 0.3;
    }

    .empty-state h3 {
      font-size: 20px;
      margin-bottom: 10px;
      color: var(--dark);
    }

    /* Loading */
    .loading {
      display: none;
      text-align: center;
      padding: 40px;
    }

    .loading.active {
      display: block;
    }

    .spinner {
      border: 4px solid var(--border);
      border-top: 4px solid var(--primary);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Filters */
    .filters {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 20px;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .filter-item {
      flex: 1;
      min-width: 200px;
    }

    /* Action Menu */
    .action-menu {
      position: relative;
      display: inline-block;
    }

    .action-btn {
      width: 32px;
      height: 32px;
      border-radius: 6px;
      border: none;
      background: var(--light);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }

    .action-btn:hover {
      background: var(--primary);
      color: white;
    }

    .action-dropdown {
      display: none;
      position: absolute;
      left: 0;
      top: 100%;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.15);
      min-width: 180px;
      margin-top: 5px;
      z-index: 100;
    }

    .action-dropdown.active {
      display: block;
    }

    .action-dropdown-item {
      padding: 12px 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 10px;
      transition: all 0.2s;
      font-size: 14px;
    }

    .action-dropdown-item:hover {
      background: var(--light);
    }

    .action-dropdown-item:first-child {
      border-radius: 8px 8px 0 0;
    }

    .action-dropdown-item:last-child {
      border-radius: 0 0 8px 8px;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(100%);
      }

      .sidebar.active {
        transform: translateX(0);
      }

      .main-content {
        margin-right: 0;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .grid-2, .grid-3 {
        grid-template-columns: 1fr;
      }

      .header-search {
        width: 200px;
      }
    }

    /* Hide sections by default */
    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <h2>
        <i class="fas fa-taxi"></i>
        ××¢×¨×›×ª ××•× ×™×•×ª
      </h2>
      <div class="user-info">
        <div class="user-avatar">
          <i class="fas fa-user"></i>
        </div>
        <div>
          <div style="font-weight: 600;">×× ×”×œ ×¨××©×™</div>
          <div style="font-size: 12px; opacity: 0.8;"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="4223262f2b2c0236233a2b6c212d2f">[email&#160;protected]</a></div>
        </div>
      </div>
    </div>

    <ul class="sidebar-menu">
      <!-- Dashboard -->
      <li class="menu-section">
        <div class="menu-section-title">×¡×§×™×¨×” ×›×œ×œ×™×ª</div>
        <div class="menu-item active" data-page="dashboard">
          <i class="fas fa-home"></i>
          <span>×“×©×‘×•×¨×“</span>
        </div>
        <div class="menu-item" data-page="analytics">
          <i class="fas fa-chart-line"></i>
          <span>× ×™×ª×•×— × ×ª×•× ×™×</span>
        </div>
      </li>

      <!-- Rides -->
      <li class="menu-section">
        <div class="menu-section-title">× ×™×”×•×œ × ×¡×™×¢×•×ª</div>
        <div class="menu-item" data-page="rides-active">
          <i class="fas fa-car"></i>
          <span>× ×¡×™×¢×•×ª ×¤×¢×™×œ×•×ª</span>
          <span class="badge" id="activeRidesCount">0</span>
        </div>
        <div class="menu-item" data-page="rides-history">
          <i class="fas fa-history"></i>
          <span>×”×™×¡×˜×•×¨×™×™×ª × ×¡×™×¢×•×ª</span>
        </div>
        <div class="menu-item" data-page="rides-create">
          <i class="fas fa-plus-circle"></i>
          <span>× ×¡×™×¢×” ×—×“×©×”</span>
        </div>
        <div class="menu-item" data-page="rides-scheduled">
          <i class="fas fa-calendar-alt"></i>
          <span>× ×¡×™×¢×•×ª ××ª×•×–×× ×•×ª</span>
        </div>
      </li>

      <!-- Drivers -->
      <li class="menu-section">
        <div class="menu-section-title">× ×™×”×•×œ × ×”×’×™×</div>
        <div class="menu-item" data-page="drivers-list">
          <i class="fas fa-users"></i>
          <span>×¨×©×™××ª × ×”×’×™×</span>
        </div>
        <div class="menu-item" data-page="drivers-pending">
          <i class="fas fa-user-clock"></i>
          <span>×××ª×™× ×™× ×œ××™×©×•×¨</span>
          <span class="badge" id="pendingDriversCount">0</span>
        </div>
        <div class="menu-item" data-page="drivers-add">
          <i class="fas fa-user-plus"></i>
          <span>×”×•×¡×£ × ×”×’</span>
        </div>
        <div class="menu-item" data-page="drivers-blocked">
          <i class="fas fa-user-slash"></i>
          <span>× ×”×’×™× ×—×¡×•××™×</span>
        </div>
      </li>

      <!-- Customers -->
      <li class="menu-section">
        <div class="menu-section-title">× ×™×”×•×œ ×œ×§×•×—×•×ª</div>
        <div class="menu-item" data-page="customers-list">
          <i class="fas fa-address-book"></i>
          <span>×¨×©×™××ª ×œ×§×•×—×•×ª</span>
        </div>
        <div class="menu-item" data-page="customers-add">
          <i class="fas fa-user-plus"></i>
          <span>×”×•×¡×£ ×œ×§×•×—</span>
        </div>
        <div class="menu-item" data-page="customers-vip">
          <i class="fas fa-star"></i>
          <span>×œ×§×•×—×•×ª VIP</span>
        </div>
      </li>

      <!-- Finance -->
      <li class="menu-section">
        <div class="menu-section-title">× ×™×”×•×œ ×›×¡×¤×™×</div>
        <div class="menu-item" data-page="finance-overview">
          <i class="fas fa-dollar-sign"></i>
          <span>×¡×§×™×¨×” ×›×œ×œ×™×ª</span>
        </div>
        <div class="menu-item" data-page="finance-payments">
          <i class="fas fa-credit-card"></i>
          <span>×ª×©×œ×•××™×</span>
        </div>
        <div class="menu-item" data-page="finance-commissions">
          <i class="fas fa-percentage"></i>
          <span>×¢××œ×•×ª</span>
        </div>
        <div class="menu-item" data-page="finance-reports">
          <i class="fas fa-file-invoice-dollar"></i>
          <span>×“×•×—×•×ª</span>
        </div>
      </li>

      <!-- Messages -->
      <li class="menu-section">
        <div class="menu-section-title">×ª×§×©×•×¨×ª</div>
        <div class="menu-item" data-page="messages-send">
          <i class="fas fa-paper-plane"></i>
          <span>×©×œ×— ×”×•×“×¢×•×ª</span>
        </div>
        <div class="menu-item" data-page="messages-templates">
          <i class="fas fa-file-alt"></i>
          <span>×ª×‘× ×™×•×ª ×”×•×“×¢×•×ª</span>
        </div>
        <div class="menu-item" data-page="messages-history">
          <i class="fas fa-comments"></i>
          <span>×”×™×¡×˜×•×¨×™×™×ª ×”×•×“×¢×•×ª</span>
        </div>
      </li>

      <!-- Settings -->
      <li class="menu-section">
        <div class="menu-section-title">×”×’×“×¨×•×ª</div>
        <div class="menu-item" data-page="settings-general">
          <i class="fas fa-cog"></i>
          <span>×”×’×“×¨×•×ª ×›×œ×œ×™×•×ª</span>
        </div>
        <div class="menu-item" data-page="settings-pricing">
          <i class="fas fa-tags"></i>
          <span>× ×™×”×•×œ ××—×™×¨×™×</span>
        </div>
        <div class="menu-item" data-page="settings-groups">
          <i class="fas fa-users-cog"></i>
          <span>×§×‘×•×¦×•×ª WhatsApp</span>
        </div>
        <div class="menu-item" data-page="settings-admins">
          <i class="fas fa-user-shield"></i>
          <span>× ×™×”×•×œ ×× ×”×œ×™×</span>
        </div>
      </li>

      <!-- System -->
      <li class="menu-section">
        <div class="menu-section-title">××¢×¨×›×ª</div>
        <div class="menu-item" data-page="system-logs">
          <i class="fas fa-clipboard-list"></i>
          <span>×œ×•×’×™×</span>
        </div>
        <div class="menu-item" data-page="system-backup">
          <i class="fas fa-database"></i>
          <span>×’×™×‘×•×™ ×•×©×—×–×•×¨</span>
        </div>
      </li>
    </ul>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="header-search">
        <i class="fas fa-search"></i>
        <input type="text" placeholder="×—×™×¤×•×© × ×¡×™×¢×•×ª, × ×”×’×™×, ×œ×§×•×—×•×ª...">
      </div>

      <div class="header-actions">
        <button class="icon-btn" onclick="refreshData()">
          <i class="fas fa-sync-alt"></i>
        </button>
        <button class="icon-btn">
          <i class="fas fa-bell"></i>
          <span class="badge-dot"></span>
        </button>
        <button class="icon-btn">
          <i class="fas fa-envelope"></i>
          <span class="badge-dot"></span>
        </button>
        <button class="icon-btn" onclick="logout()">
          <i class="fas fa-sign-out-alt"></i>
        </button>
      </div>
    </div>

    <!-- Content Area -->
    <div class="content-area" id="contentArea">
      <!-- Dashboard Section -->
      <div class="content-section active" id="dashboard">
        <div class="page-header">
          <h1>×“×©×‘×•×¨×“</h1>
          <div class="breadcrumb">
            <i class="fas fa-home"></i>
            <span>×¡×§×™×¨×” ×›×œ×œ×™×ª</span>
          </div>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-info">
              <h3>× ×¡×™×¢×•×ª ×”×™×•×</h3>
              <div class="stat-value" id="todayRides">0</div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>12% ×××ª××•×œ</span>
              </div>
            </div>
            <div class="stat-icon primary">
              <i class="fas fa-car"></i>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-info">
              <h3>× ×”×’×™× ×¤×¢×™×œ×™×</h3>
              <div class="stat-value" id="activeDrivers">0</div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>5 ×—×“×©×™×</span>
              </div>
            </div>
            <div class="stat-icon success">
              <i class="fas fa-users"></i>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-info">
              <h3>×”×›× ×¡×•×ª ×”×™×•×</h3>
              <div class="stat-value">â‚ª<span id="todayRevenue">0</span></div>
              <div class="stat-change positive">
                <i class="fas fa-arrow-up"></i>
                <span>18% ×××ª××•×œ</span>
              </div>
            </div>
            <div class="stat-icon warning">
              <i class="fas fa-dollar-sign"></i>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-info">
              <h3>×××ª×™× ×™× ×œ××™×©×•×¨</h3>
              <div class="stat-value" id="pendingApprovals">0</div>
              <div class="stat-change">
                <i class="fas fa-clock"></i>
                <span>×“×•×¨×© ×˜×™×¤×•×œ</span>
              </div>
            </div>
            <div class="stat-icon danger">
              <i class="fas fa-exclamation-circle"></i>
            </div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
          <div class="card-header">
            <h2><i class="fas fa-bolt"></i> ×¤×¢×•×œ×•×ª ××”×™×¨×•×ª</h2>
          </div>
          <div class="grid-3">
            <button class="btn btn-primary" onclick="showPage('rides-create')">
              <i class="fas fa-plus"></i>
              × ×¡×™×¢×” ×—×“×©×”
            </button>
            <button class="btn btn-success" onclick="showPage('drivers-pending')">
              <i class="fas fa-user-check"></i>
              ××©×¨ × ×”×’×™×
            </button>
            <button class="btn btn-warning" onclick="showPage('messages-send')">
              <i class="fas fa-paper-plane"></i>
              ×©×œ×— ×”×•×“×¢×•×ª
            </button>
          </div>
        </div>

        <!-- Recent Activity -->
        <div class="card">
          <div class="card-header">
            <h2><i class="fas fa-clock"></i> ×¤×¢×™×œ×•×ª ××—×¨×•× ×”</h2>
            <button class="btn btn-sm btn-outline" onclick="loadRecentActivity()">
              <i class="fas fa-sync"></i>
              ×¨×¢× ×Ÿ
            </button>
          </div>
          <div id="recentActivity">
            <div class="loading active">
              <div class="spinner"></div>
              <p>×˜×•×¢×Ÿ...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Other sections will be loaded dynamically -->
      <div class="content-section" id="rides-active">
        <div class="page-header">
          <h1>× ×¡×™×¢×•×ª ×¤×¢×™×œ×•×ª</h1>
          <div class="breadcrumb">
            <i class="fas fa-home"></i>
            <span>× ×¡×™×¢×•×ª</span>
            <span>â€º</span>
            <span>×¤×¢×™×œ×•×ª</span>
          </div>
        </div>
        <!-- Content will be loaded here -->
      </div>

      <!-- More sections... (will be added) -->
    </div>
  </div>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
    // ============================================
    // GLOBAL STATE
    // ============================================
    let currentPage = 'dashboard';
    let rides = [];
    let drivers = [];
    let customers = [];

    // ============================================
    // MENU NAVIGATION
    // ============================================
    document.querySelectorAll('.menu-item').forEach(item => {
      item.addEventListener('click', function() {
        const page = this.dataset.page;
        showPage(page);
      });
    });

    function showPage(pageName) {
      // Update menu
      document.querySelectorAll('.menu-item').forEach(item => {
        item.classList.remove('active');
      });
      document.querySelector(`[data-page="${pageName}"]`)?.classList.add('active');

      // Update content
      document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
      });
      
      const section = document.getElementById(pageName);
      if (section) {
        section.classList.add('active');
        currentPage = pageName;
        
        // Load page data
        loadPageData(pageName);
      }
    }

    // ============================================
    // DATA LOADING
    // ============================================
    function loadPageData(pageName) {
      console.log('Loading page:', pageName);
      
      switch(pageName) {
        case 'dashboard':
          loadDashboard();
          break;
        case 'rides-active':
          loadActiveRides();
          break;
        case 'drivers-list':
          loadDrivers();
          break;
        // Add more cases as needed
      }
    }

    async function loadDashboard() {
      try {
        // Load stats
        const response = await fetch('/api/dashboard/stats');
        const stats = await response.json();
        
        document.getElementById('todayRides').textContent = stats.todayRides || 0;
        document.getElementById('activeDrivers').textContent = stats.activeDrivers || 0;
        document.getElementById('todayRevenue').textContent = stats.todayRevenue || 0;
        document.getElementById('pendingApprovals').textContent = stats.pendingApprovals || 0;
        
        // Load recent activity
        loadRecentActivity();
      } catch (error) {
        console.error('Error loading dashboard:', error);
      }
    }

    async function loadRecentActivity() {
      const container = document.getElementById('recentActivity');
      container.innerHTML = '<div class="loading active"><div class="spinner"></div><p>×˜×•×¢×Ÿ...</p></div>';
      
      try {
        const response = await fetch('/api/activity/recent?limit=10');
        const activities = await response.json();
        
        if (activities.length === 0) {
          container.innerHTML = '<div class="empty-state"><i class="fas fa-inbox"></i><h3>××™×Ÿ ×¤×¢×™×œ×•×ª ××—×¨×•× ×”</h3></div>';
          return;
        }
        
        let html = '<div class="table-container"><table><thead><tr><th>×–××Ÿ</th><th>×¤×¢×•×œ×”</th><th>××©×ª××©</th><th>×¤×¨×˜×™×</th></tr></thead><tbody>';
        
        activities.forEach(activity => {
          html += `
            <tr>
              <td>${formatDate(activity.createdAt)}</td>
              <td>${activity.description}</td>
              <td>${activity.userId}</td>
              <td>${activity.metadata ? JSON.stringify(activity.metadata) : '-'}</td>
            </tr>
          `;
        });
        
        html += '</tbody></table></div>';
        container.innerHTML = html;
      } catch (error) {
        console.error('Error loading activity:', error);
        container.innerHTML = '<div class="empty-state"><i class="fas fa-exclamation-circle"></i><h3>×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™×</h3></div>';
      }
    }

    async function loadActiveRides() {
      if (ridesManager) {
        await ridesManager.loadActiveRides();
      } else {
        console.log('RidesManager not loaded');
      }
    }

    async function loadDrivers() {
      if (driversManager) {
        await driversManager.loadDriversList();
      } else {
        console.log('DriversManager not loaded');
      }
    }

    // ============================================
    // UTILITY FUNCTIONS
    // ============================================
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleString('he-IL');
    }

    function formatCurrency(amount) {
      return `â‚ª${amount.toFixed(2)}`;
    }

    function refreshData() {
      loadPageData(currentPage);
    }

    function logout() {
      if (confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×ª× ×ª×§?')) {
        window.location.href = '/login.html';
      }
    }

    // ============================================
    // INIT
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      console.log('Dashboard initialized');
         // Check auth
      const token = localStorage.getItem('authToken');
      if (!token) {
        window.location.href = '/login.html';
        return;
      }
      
      // Load initial page
      loadPageData('dashboard');
    });
  </script>

  <!-- ============================================ -->
  <!-- JS MODULES -->
  <!-- ============================================ -->
  <script src="/js/rides.js" onerror="console.log('rides.js not loaded')"></script>
  <script src="/js/drivers.js" onerror="console.log('drivers.js not loaded')"></script>
  <script src="/js/customers.js" onerror="console.log('customers.js not loaded')"></script>
  <script src="/js/finance.js" onerror="console.log('finance.js not loaded')"></script>
  <script src="/js/messages.js" onerror="console.log('messages.js not loaded')"></script>
  <script src="/js/settings.js" onerror="console.log('settings.js not loaded')"></script>
  <script src="/js/system.js" onerror="console.log('system.js not loaded')"></script>
  <script src="/js/dashboard.js" onerror="console.log('dashboard.js not loaded')"></script>

  <!-- Initialize modules -->
  <script>
    // Create module instances
    let ridesManager, driversManager, customersManager, financeManager, messagesManager, settingsManager, systemManager, dashboardManager;

    document.addEventListener('DOMContentLoaded', function() {
      // Initialize all managers
      if (typeof RidesManager !== 'undefined') {
        ridesManager = new RidesManager();
      }
      if (typeof DriversManager !== 'undefined') {
        driversManager = new DriversManager();
      }
      if (typeof CustomersManager !== 'undefined') {
        customersManager = new CustomersManager();
      }
      if (typeof FinanceManager !== 'undefined') {
        financeManager = new FinanceManager();
      }
      if (typeof MessagesManager !== 'undefined') {
        messagesManager = new MessagesManager();
      }
      if (typeof SettingsManager !== 'undefined') {
        settingsManager = new SettingsManager();
      }
      if (typeof SystemManager !== 'undefined') {
        systemManager = new SystemManager();
      }
      if (typeof DashboardManager !== 'undefined') {
        dashboardManager = new DashboardManager();
      }
      
      console.log('âœ… All modules initialized!');
    });
  </script>
</body>
</html>
