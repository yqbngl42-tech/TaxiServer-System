# ===============================================
# ðŸš– TAXI MANAGEMENT SYSTEM - Environment Variables
# ===============================================
# Copy this file to .env and fill in your values

# ========== ENVIRONMENT ==========
NODE_ENV=development
PORT=3000

# ========== DATABASE ==========
MONGODB_URI=mongodb://localhost:27017/taxi-system

# ========== SECURITY - JWT ==========
# Generate a strong JWT secret (min 32 characters)
# You can use: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your-super-secret-jwt-key-min-32-characters-long-change-this
JWT_EXPIRATION=15m

# Refresh Token (different from JWT_SECRET!)
REFRESH_TOKEN_SECRET=your-different-refresh-token-secret-min-32-characters
REFRESH_TOKEN_EXPIRATION=7d

# ========== SECURITY - ADMIN PASSWORD ==========
# Admin password HASH (NOT plaintext!)
# Generate with: npm run generate-password
ADMIN_PASSWORD_HASH=$2a$12$your-bcrypt-hashed-password-here

# For development only (will use plaintext if no hash provided)
# Remove this in production!
ADMIN_PASSWORD=your-strong-admin-password-change-this

# ========== SECURITY - TWO FACTOR AUTH ==========
# Enable 2FA for admin login
ENABLE_2FA=false
# 2FA secret will be generated and stored in DB

# ========== TWILIO (WhatsApp) ==========
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your-twilio-auth-token-here
TWILIO_WHATSAPP_FROM=whatsapp:+14155238886
WEBHOOK_URL=https://your-domain.com

# Skip Twilio signature validation in development (set to false in production)
SKIP_TWILIO_VALIDATION=false

# ========== BOT INTEGRATION ==========
# URL where the WhatsApp bot is running
BOT_URL=http://localhost:3001

# ========== DISPATCH MANAGER (SMART ROUTING) ==========
# Dispatch mode: auto | bot-only | twilio-only
# - auto: Try bot first, fallback to Twilio if bot fails
# - bot-only: Only use bot (fail if bot unavailable)
# - twilio-only: Only use Twilio
DISPATCH_MODE=auto

# Maximum consecutive bot failures before switching to Twilio
MAX_BOT_FAILURES=3

# Maximum consecutive Twilio failures
MAX_TWILIO_FAILURES=3

# Health check interval (milliseconds)
# Default: 30000 (30 seconds)
HEALTH_CHECK_INTERVAL=30000

# ========== REDIS (Highly Recommended) ==========
# Redis for rate limiting and caching
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
# Full Redis URL (alternative to host/port)
# REDIS_URL=redis://localhost:6379

# ========== RATE LIMITING ==========
# Rate limit settings
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60000

# API-specific rate limits (requests per minute)
RATE_LIMIT_LOGIN=5
RATE_LIMIT_API=100
RATE_LIMIT_UPLOAD=10

# ========== FEATURES ==========
# Enable WebSocket for real-time updates
ENABLE_WEBSOCKETS=true

# Enable Swagger API documentation
ENABLE_SWAGGER=true

# Enable detailed error messages (disable in production)
ENABLE_STACK_TRACE=true

# ========== CORS ==========
# Frontend URL for CORS
FRONTEND_URL=http://localhost:5500

# Additional allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5500

# Allowed domains for subdomain matching
# ALLOWED_DOMAINS=yourdomain.com,api.yourdomain.com

# ========== LOGGING ==========
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Disable console.log in production
DISABLE_CONSOLE_LOG=false

# Log file rotation (days)
LOG_RETENTION_DAYS=30

# ========== FILE UPLOAD ==========
# Max file size in bytes (10MB default)
MAX_FILE_SIZE=10485760

# Allowed file types (comma-separated)
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/jpg,application/pdf

# Upload directory
UPLOAD_DIR=./uploads

# ========== PAYMENT (Optional) ==========
# Stripe for online payments
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLIC_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Bit payment link
BIT_LINK=https://bit.ly/taxi-payment

# PayPal
PAYPAL_CLIENT_ID=
PAYPAL_SECRET=
PAYPAL_MODE=sandbox

# ========== MAPS (Optional) ==========
# Google Maps API for location features
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# ========== MONITORING & ANALYTICS ==========
# Sentry for error tracking
SENTRY_DSN=https://xxx@sentry.io/xxx
SENTRY_ENVIRONMENT=development

# New Relic
NEW_RELIC_LICENSE_KEY=your-new-relic-license-key
NEW_RELIC_APP_NAME=Taxi Management System

# Google Analytics
GA_TRACKING_ID=UA-XXXXXXXXX-X

# ========== EMAIL (Optional) ==========
# SMTP settings for email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Email settings
EMAIL_FROM=noreply@taxi-system.com
EMAIL_FROM_NAME=Taxi Management System

# ========== SMS (Optional) ==========
# SMS provider settings (alternative to Twilio)
SMS_PROVIDER=twilio
SMS_API_KEY=
SMS_API_SECRET=

# ========== BACKUP ==========
# Automatic backup settings
ENABLE_AUTO_BACKUP=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ========== PERFORMANCE ==========
# MongoDB connection pool size
MONGODB_POOL_SIZE=200

# Request timeout (ms)
REQUEST_TIMEOUT=30000

# Body parser limit
BODY_LIMIT=10mb

# ========== DEBUGGING ==========
# Enable debug mode
DEBUG=false

# Enable API request logging
LOG_API_REQUESTS=true

# Enable slow query logging (ms threshold)
SLOW_QUERY_THRESHOLD=1000

# ========== SOCIAL MEDIA (Optional) ==========
# Facebook
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ========== WEBHOOKS (Optional) ==========
# Webhook URLs for integrations
WEBHOOK_RIDE_CREATED=
WEBHOOK_RIDE_COMPLETED=
WEBHOOK_DRIVER_REGISTERED=

# ========== CUSTOM SETTINGS ==========
# Company name
COMPANY_NAME=Taxi Management System

# Support contact
SUPPORT_EMAIL=support@taxi-system.com
SUPPORT_PHONE=+972501234567

# Business hours
BUSINESS_HOURS_START=06:00
BUSINESS_HOURS_END=23:00

# Timezone
TIMEZONE=Asia/Jerusalem

# Currency
CURRENCY=ILS
CURRENCY_SYMBOL=â‚ª
